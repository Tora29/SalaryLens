# SalaryLens

## アーキテクチャ

- UI ライブラリ: React 19
- フレームワーク: React Router v7
- スタイリング: Tailwind CSS v4
- バリデーション: zod
- ORM: Prisma
- アイコン: lucide
- ディレクトリ: コロケーション

### コロケーション

機能に関連するファイルを同じディレクトリにまとめます。

```
app/routes/{feature}/
├── route.tsx          # ルート（loader/action/UI）
├── server.ts          # DBアクセス・外部API
├── service.ts         # ビジネスロジック（純粋関数）
├── schema.ts          # Zodスキーマ + ドメイン型
├── types.ts           # 子コンポーネントのProps型（必要な場合）
├── components/        # 機能固有のUIコンポーネント
│   └── FeatureCard.tsx
└── __tests__/         # テスト
    ├── server.test.ts
    └── service.test.ts
```

## 開発フロー

一機能を開発する際は、以下のスラッシュコマンドを順番に実行します。

```
┌─────────────────────────────────────────────────────────────┐
│ 1. 開発環境の準備                                            │
│    /01-create-worktree → 並行開発用の worktree を作成        │
└─────────────────────────────────────────────────────────────┘
                              ↓
┌─────────────────────────────────────────────────────────────┐
│ 2. 機能の実装                                                │
│    /02-create-route    → ルートファイルを作成（コロケーション）│
│    /03-refactor-logic  → ロジックを server/service/schema へ  │
│    /04-refactor-ui     → UI コンポーネントを分割              │
└─────────────────────────────────────────────────────────────┘
                              ↓
┌─────────────────────────────────────────────────────────────┐
│ 3. テストの作成                                              │
│    /05-generate-vitest → ユニットテストを作成                │
│    /06-generate-e2e    → E2E テストを作成                    │
└─────────────────────────────────────────────────────────────┘
                              ↓
┌─────────────────────────────────────────────────────────────┐
│ 4. ドキュメント・PR                                          │
│    /07-generate-design-doc → 設計書を自動生成                │
│    /08-create-pr           → PR を作成してレビュー依頼       │
└─────────────────────────────────────────────────────────────┘
                              ↓
┌─────────────────────────────────────────────────────────────┐
│ 5. クリーンアップ（マージ後）                                │
│    /09-end-dev → worktree とブランチを削除                   │
└─────────────────────────────────────────────────────────────┘
```

※ `/99-generate-prompt` はコンテキスト限界時に次回セッションへ引き継ぐプロンプトを作成します。

## 実装ルール

- 型ルール: `.claude/rules/type-management.md`
- レイヤー依存関係ルール: `.claude/rules/layer-dependencies.md`
- デザインルール: `.claude/skills/material-design/SKILL.md`
- Web標準ルール: `.claude/rules/web-standards.md`
- アイコンルール: `.claude/rules/icon-usage.md`
- バリデーションルール: `.claude/rules/validation.md`
- コンポーネント再利用ルール: `.claude/rules/component-reuse.md`

実装後、「ルールに従っているか確認して」と依頼すると、`rules-compliance-checker` エージェントが自動で検証します。
